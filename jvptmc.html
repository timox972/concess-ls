<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Concession GTA RP</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    .vehicle-card {
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 10px;
      width: 200px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .delete-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: red;
      font-size: 16px;
      margin-left: 10px;
    }
  </style>
</head>
<body>

<button id="openCartBtn">Voir le panier (<span id="cartCount">0</span>)</button>

<div id="cartModal" style="display:none; position:fixed; top:10%; left:10%; width:80%; max-width:600px; background:#fff; border:1px solid #ccc; padding:20px; box-shadow: 0 0 10px rgba(0,0,0,0.3); z-index:1000;">
  <button id="closeCartBtn" style="float:right; cursor:pointer;">Fermer</button>
  <h2>Votre panier</h2>
  <ul id="cartItems" style="list-style:none; padding:0;"></ul>
  <p>Total : <span id="cartTotal">$0</span></p>
  <input type="text" id="buyerName" placeholder="Nom de l'acheteur" style="width:100%; padding:5px; margin-top:10px;">
  <textarea id="orderSummary" rows="5" style="width:100%; margin-top:10px;"></textarea>
</div>

<div id="vehicleList" style="display:flex; flex-wrap:wrap; gap:10px; margin-top:20px;"></div>

<script>
  const vehicles = [
    ["Elegy Retro Custom", 904000],
    ["Grotti Turismo R", 500000],
    ["Infernus Classic", 440000],
    ["Ignus", 1900000],
    ["Issi Classic", 30000],
    ["Itali GTB Custom", 1725000],
    ["Jester Classic", 784000],
    ["Khamelion", 180000],
    ["Krieger", 2875000],
    ["Lynx", 1900000],
    ["Massacro", 195000],
    ["Monroe", 890000],
    ["Neon", 1570000],
    ["Nero", 1440000],
    ["Nero Custom", 1560000],
    ["Ninef", 225000],
    ["Omnis", 810000],
    ["Paragon R", 1420000],
    ["Penumbra FF", 90000],
    ["Pfister Comet", 100000],
    ["Pfister Comet SR", 975000],
    ["Rapid GT Classic", 335000],
    ["Revolter", 1460000],
    ["Ruston", 580000],
    ["Schafter V12", 145000],
    ["Schwarzer", 65000],
    ["Sentinel XS", 55000],
    ["Surano", 225000],
    ["Tezeract", 2825000],
    ["Turismo Classic", 500000],
    ["Turismo R", 500000],
    ["Turismo Omaggio", 2845000],
    ["Tyrus", 2000000],
    ["Vacca", 240000],
    ["Vagner", 1535000],
    ["Voltic", 150000],
    ["Zentorno", 725000],
    ["Zorrusso", 1845000]
  ];

  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  const formatPrice = n => '$' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
  const updateCount = () => document.getElementById('cartCount').textContent = cart.length;
  const calcTotal = () => cart.reduce((s, v) => s + v[1], 0);

  function renderCart() {
    const items = document.getElementById('cartItems');
    items.innerHTML = '';
    cart.forEach((v, index) => {
      const li = document.createElement('li');
      li.textContent = `${v[0]} - ${formatPrice(v[1])}`;
      const removeBtn = document.createElement('button');
      removeBtn.textContent = 'ðŸ—‘ï¸';
      removeBtn.className = 'delete-btn';
      removeBtn.onclick = () => {
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCount();
        renderCart();
      };
      li.appendChild(removeBtn);
      items.appendChild(li);
    });

    const name = document.getElementById('buyerName').value;
    const facture = cart.map(v => `${v[0]} (${formatPrice(v[1])})`).join('\n') +
      `\n\nTotal : ${formatPrice(calcTotal())}` +
      (name ? `\nAcheteur : ${name}` : '');

    document.getElementById('cartTotal').textContent = formatPrice(calcTotal());
    document.getElementById('orderSummary').value = facture;
  }

  document.getElementById('openCartBtn').addEventListener('click', () => {
    renderCart();
    document.getElementById('cartModal').style.display = 'block';
  });

  document.getElementById('closeCartBtn').addEventListener('click', () => {
    document.getElementById('cartModal').style.display = 'none';
  });

  updateCount();

  const vehicleList = document.getElementById('vehicleList');
  vehicles.forEach((v, i) => {
    const card = document.createElement('div');
    card.className = 'vehicle-card';

    const title = document.createElement('h3');
    title.textContent = v[0];

    const price = document.createElement('p');
    price.textContent = formatPrice(v[1]);

    const btn = document.createElement('button');
    btn.textContent = 'Ajouter au panier';
    btn.onclick = () => {
      cart.push(v);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCount();
    };

    card.append(title, price, btn);
    vehicleList.appendChild(card);
  });
</script>

</body>
</html>
